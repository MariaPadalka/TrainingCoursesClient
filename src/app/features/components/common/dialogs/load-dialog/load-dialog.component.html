<h1 mat-dialog-title>
    {{ data.load ? 'Edit Load' : 'Add Load' }}
</h1>

<form [formGroup]="loadForm">
    <div mat-dialog-content>
        <mat-form-field appearance="fill">
            <mat-label>Teacher</mat-label>
            <mat-select formControlName="teacher">
                <mat-option
                    *ngFor="let teacher of teachers"
                    [value]="teacher._id"
                >
                    {{ teacher.firstName }} {{ teacher.lastName }}
                </mat-option>
            </mat-select>
            <mat-error *ngIf="loadForm.get('teacher')?.hasError('required')">
                Teacher is required
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Group</mat-label>
            <mat-select formControlName="group">
                <mat-option *ngFor="let group of groups" [value]="group._id">
                    {{ group.specialty }}, {{ group.department }},
                    {{ group.studentCount }} students
                </mat-option>
            </mat-select>
            <mat-error *ngIf="loadForm.get('group')?.hasError('required')">
                Group is required
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Subject</mat-label>
            <mat-select formControlName="subject">
                <mat-option
                    *ngFor="let subject of subjects"
                    [value]="subject._id"
                >
                    {{ subject.subjectName }}
                </mat-option>
            </mat-select>
            <mat-error *ngIf="loadForm.get('subject')?.hasError('required')">
                Subject is required
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Lesson Type</mat-label>
            <mat-select formControlName="lessonType">
                <mat-option value="practice">Practice</mat-option>
                <mat-option value="lecture">Lecture</mat-option>
            </mat-select>
            <mat-error *ngIf="loadForm.get('lessonType')?.hasError('required')">
                Lesson Type is required
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Hours</mat-label>
            <input matInput type="number" formControlName="hours" />
            <mat-error *ngIf="loadForm.get('hours')?.hasError('required')">
                Hours are required
            </mat-error>
            <mat-error *ngIf="loadForm.get('hours')?.hasError('min')">
                Hours must be greater than 0
            </mat-error>
        </mat-form-field>
    </div>

    <div mat-dialog-actions>
        <button mat-button (click)="onNoClick()">Cancel</button>
        <button
            mat-button
            color="primary"
            [disabled]="!loadForm.valid"
            (click)="onSaveClick()"
        >
            Save
        </button>
    </div>
</form>
